<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StatisticsData.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">inf2050-a24-projet-equipe6</a> &gt; <a href="index.source.html" class="el_package">GROUPE6_INF2050.Reporting</a> &gt; <span class="el_source">StatisticsData.java</span></div><h1>StatisticsData.java</h1><pre class="source lang-java linenums">package GROUPE6_INF2050.Reporting;

import net.sf.json.JSONObject;

import java.util.HashMap;
import java.util.Map;

<span class="fc" id="L8">public class StatisticsData {</span>
    private int totalDeclarations;
    private int completeDeclarations;
    private int incompleteOrInvalidDeclarations;
    private int maleDeclarations;
    private int femaleDeclarations;
    private int unknownGenderDeclarations;
    private int totalActivities;
<span class="fc" id="L16">    private final Map&lt;String, Integer&gt; activitiesByCategory = new HashMap&lt;&gt;();</span>
<span class="fc" id="L17">    private final Map&lt;String, Integer&gt; completeDeclarationsByOrder = new HashMap&lt;&gt;();</span>
<span class="fc" id="L18">    private final Map&lt;String, Integer&gt; validDeclarationsByOrder = new HashMap&lt;&gt;();</span>
    private int invalidPermitDeclarations;

    public synchronized void incrementTotalDeclarations(int count) {
<span class="fc" id="L22">        totalDeclarations += count;</span>
<span class="fc" id="L23">    }</span>

    public synchronized void incrementCompleteDeclarations(int count) {
<span class="fc" id="L26">        completeDeclarations += count;</span>
<span class="fc" id="L27">    }</span>

    public synchronized void incrementIncompleteOrInvalidDeclarations(int count) {
<span class="fc" id="L30">        incompleteOrInvalidDeclarations += count;</span>
<span class="fc" id="L31">    }</span>

    public synchronized void incrementMaleDeclarations(int count) {
<span class="fc" id="L34">        maleDeclarations += count;</span>
<span class="fc" id="L35">    }</span>

    public synchronized void incrementFemaleDeclarations(int count) {
<span class="fc" id="L38">        femaleDeclarations += count;</span>
<span class="fc" id="L39">    }</span>

    public synchronized void incrementUnknownGenderDeclarations(int count) {
<span class="fc" id="L42">        unknownGenderDeclarations += count;</span>
<span class="fc" id="L43">    }</span>

    public synchronized void incrementTotalActivities(int count) {
<span class="fc" id="L46">        totalActivities += count;</span>
<span class="fc" id="L47">    }</span>

    public synchronized void incrementActivitiesByCategory(String category, int count) {
<span class="fc" id="L50">        activitiesByCategory.merge(category, count, Integer::sum);</span>
<span class="fc" id="L51">    }</span>

    public synchronized void incrementCompleteDeclarationsByOrder(String order, int count) {
<span class="fc" id="L54">        completeDeclarationsByOrder.merge(order, count, Integer::sum);</span>
<span class="fc" id="L55">    }</span>

    public synchronized void incrementValidDeclarationsByOrder(String order, int count) {
<span class="fc" id="L58">        validDeclarationsByOrder.merge(order, count, Integer::sum);</span>
<span class="fc" id="L59">    }</span>

    public synchronized void incrementInvalidPermitDeclarations(int count) {
<span class="fc" id="L62">        invalidPermitDeclarations += count;</span>
<span class="fc" id="L63">    }</span>

    public synchronized int getTotalDeclarations() {
<span class="fc" id="L66">        return totalDeclarations;</span>
    }

    public synchronized int getCompleteDeclarations() {
<span class="fc" id="L70">        return completeDeclarations;</span>
    }

    public synchronized int getIncompleteOrInvalidDeclarations() {
<span class="fc" id="L74">        return incompleteOrInvalidDeclarations;</span>
    }

    public synchronized int getMaleDeclarations() {
<span class="fc" id="L78">        return maleDeclarations;</span>
    }

    public synchronized int getFemaleDeclarations() {
<span class="fc" id="L82">        return femaleDeclarations;</span>
    }

    public synchronized int getUnknownGenderDeclarations() {
<span class="fc" id="L86">        return unknownGenderDeclarations;</span>
    }

    public synchronized int getTotalActivities() {
<span class="fc" id="L90">        return totalActivities;</span>
    }

    public synchronized Map&lt;String, Integer&gt; getActivitiesByCategory() {
<span class="fc" id="L94">        return new HashMap&lt;&gt;(activitiesByCategory);</span>
    }

    public synchronized Map&lt;String, Integer&gt; getCompleteDeclarationsByOrder() {
<span class="fc" id="L98">        return new HashMap&lt;&gt;(completeDeclarationsByOrder);</span>
    }

    public synchronized Map&lt;String, Integer&gt; getValidDeclarationsByOrder() {
<span class="fc" id="L102">        return new HashMap&lt;&gt;(validDeclarationsByOrder);</span>
    }

    public synchronized int getInvalidPermitDeclarations() {
<span class="fc" id="L106">        return invalidPermitDeclarations;</span>
    }

    public synchronized void reset() {
<span class="fc" id="L110">        totalDeclarations = 0;</span>
<span class="fc" id="L111">        completeDeclarations = 0;</span>
<span class="fc" id="L112">        incompleteOrInvalidDeclarations = 0;</span>
<span class="fc" id="L113">        maleDeclarations = 0;</span>
<span class="fc" id="L114">        femaleDeclarations = 0;</span>
<span class="fc" id="L115">        unknownGenderDeclarations = 0;</span>
<span class="fc" id="L116">        totalActivities = 0;</span>
<span class="fc" id="L117">        variablesWithMaps();</span>
<span class="fc" id="L118">    }</span>

    private void variablesWithMaps() {
<span class="fc" id="L121">        activitiesByCategory.clear();</span>
<span class="fc" id="L122">        completeDeclarationsByOrder.clear();</span>
<span class="fc" id="L123">        validDeclarationsByOrder.clear();</span>
<span class="fc" id="L124">        invalidPermitDeclarations = 0;</span>
<span class="fc" id="L125">        System.out.println(&quot;Statistics have been reset:&quot;);</span>
<span class="fc" id="L126">        System.out.println(this);</span>
<span class="fc" id="L127">    }</span>

    public synchronized void populateFromJson(JSONObject jsonObject) {
<span class="fc" id="L130">        populateGeneralStatistics(jsonObject);</span>
<span class="fc" id="L131">        populateActivitiesByCategory(jsonObject.optJSONObject(&quot;activitiesByCategory&quot;));</span>
<span class="fc" id="L132">        populateCompleteDeclarationsByOrder(jsonObject.optJSONObject(&quot;completeDeclarationsByOrder&quot;));</span>
<span class="fc" id="L133">        populateValidDeclarationsByOrder(jsonObject.optJSONObject(&quot;validDeclarationsByOrder&quot;));</span>
<span class="fc" id="L134">    }</span>

    private void populateGeneralStatistics(JSONObject jsonObject) {
<span class="fc" id="L137">        incrementTotalDeclarations(jsonObject.optInt(&quot;totalDeclarations&quot;, 0));</span>
<span class="fc" id="L138">        incrementCompleteDeclarations(jsonObject.optInt(&quot;completeDeclarations&quot;, 0));</span>
<span class="fc" id="L139">        incrementIncompleteOrInvalidDeclarations(jsonObject.optInt(&quot;incompleteOrInvalidDeclarations&quot;, 0));</span>
<span class="fc" id="L140">        incrementMaleDeclarations(jsonObject.optInt(&quot;maleDeclarations&quot;, 0));</span>
<span class="fc" id="L141">        incrementFemaleDeclarations(jsonObject.optInt(&quot;femaleDeclarations&quot;, 0));</span>
<span class="fc" id="L142">        incrementUnknownGenderDeclarations(jsonObject.optInt(&quot;unknownGenderDeclarations&quot;, 0));</span>
<span class="fc" id="L143">        incrementTotalActivities(jsonObject.optInt(&quot;totalActivities&quot;, 0));</span>
<span class="fc" id="L144">        incrementInvalidPermitDeclarations(jsonObject.optInt(&quot;invalidPermitDeclarations&quot;, 0));</span>
<span class="fc" id="L145">    }</span>

    private void populateActivitiesByCategory(JSONObject activities) {
<span class="fc bfc" id="L148" title="All 2 branches covered.">        if (activities != null) {</span>
<span class="pc" id="L149">            activities.keySet().forEach(key -&gt; incrementActivitiesByCategory(key.toString(), activities.optInt(key.toString())));</span>
        }
<span class="fc" id="L151">    }</span>

    private void populateCompleteDeclarationsByOrder(JSONObject completeByOrder) {
<span class="fc bfc" id="L154" title="All 2 branches covered.">        if (completeByOrder != null) {</span>
<span class="pc" id="L155">            completeByOrder.keySet().forEach(key -&gt; incrementCompleteDeclarationsByOrder(key.toString(), completeByOrder.optInt(key.toString())));</span>
        }
<span class="fc" id="L157">    }</span>

    private void populateValidDeclarationsByOrder(JSONObject validByOrder) {
<span class="fc bfc" id="L160" title="All 2 branches covered.">        if (validByOrder != null) {</span>
<span class="pc" id="L161">            validByOrder.keySet().forEach(key -&gt; incrementValidDeclarationsByOrder(key.toString(), validByOrder.optInt(key.toString())));</span>
        }
<span class="fc" id="L163">    }</span>

    @Override
    public synchronized String toString() {
<span class="fc" id="L167">        return &quot;StatisticsData{\n&quot; + &quot;  totalDeclarations=&quot; + totalDeclarations + &quot;,\n&quot; + &quot;  completeDeclarations=&quot; + completeDeclarations +</span>
                &quot;,\n&quot; + &quot;  incompleteOrInvalidDeclarations=&quot; + incompleteOrInvalidDeclarations + &quot;,\n&quot; + &quot;  maleDeclarations=&quot; + maleDeclarations +
                &quot;,\n&quot; + &quot;  femaleDeclarations=&quot; + femaleDeclarations + &quot;,\n&quot; + &quot;  unknownGenderDeclarations=&quot; + unknownGenderDeclarations +
<span class="fc bfc" id="L170" title="All 2 branches covered.">                &quot;,\n&quot; + &quot;  totalActivities=&quot; + totalActivities + &quot;,\n&quot; + &quot;  activitiesByCategory=&quot; + (activitiesByCategory.isEmpty() ? &quot;0&quot; : activitiesByCategory) +</span>
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">                &quot;,\n&quot; + &quot;  completeDeclarationsByOrder=&quot; + (completeDeclarationsByOrder.isEmpty() ? &quot;0&quot; : completeDeclarationsByOrder) +</span>
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">                &quot;,\n&quot; + &quot;  validDeclarationsByOrder=&quot; + (validDeclarationsByOrder.isEmpty() ? &quot;0&quot; : validDeclarationsByOrder) +</span>
                &quot;,\n&quot; + &quot;  invalidPermitDeclarations=&quot; + invalidPermitDeclarations + &quot;\n&quot; + '}';
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>